javascript:(function(){const button=document.createElement("button");button.innerText="Submit File";button.style.backgroundColor="green";button.style.color="white";button.style.padding="5px";button.style.border="none";button.style.borderRadius="5px";button.style.margin="5px";const progressContainer=document.createElement("div");progressContainer.style.width="99%";progressContainer.style.height="5px";progressContainer.style.backgroundColor="grey";const progressBar=document.createElement("div");progressBar.style.width="0%";progressBar.style.height="100%";progressBar.style.backgroundColor="blue";const targetElement=document.querySelector(".grow");targetElement.parentNode.insertBefore(button,targetElement);targetElement.parentNode.insertBefore(progressContainer,targetElement);button.addEventListener("click",async()=>{const fileInput=document.createElement("input");fileInput.type="file";fileInput.accept=".txt,.js,.py,.html,.css,.json,.csv,.ps1,.pdf,.vue";fileInput.style.display="none";document.body.appendChild(fileInput);fileInput.click();fileInput.addEventListener("change",async(event)=>{const file=event.target.files[0];const filename=file.name;const fileSize=file.size;const chunkSize=10000;const numChunks=Math.ceil(fileSize/chunkSize);for(let i=0;i<numChunks;i++){const blobSlice=file.slice(i*chunkSize,(i+1)*chunkSize);const chunk=await readChunk(blobSlice);await submitConversation(chunk,i+1,filename);progressBar.style.width=`${((i+1)/numChunks)*100}%`;let chatgptReady=false;while(!chatgptReady){await new Promise((resolve)=>setTimeout(resolve,1000));chatgptReady=!document.querySelector(".text-2xl > span:not(.invisible)");}}progressBar.style.backgroundColor="blue";});});async function submitConversation(text,part,filename){const textarea=document.querySelector("textarea[tabindex='0']");const enterKeyEvent=new KeyboardEvent("keydown",{bubbles:true,cancelable:true,keyCode:13,});textarea.value+=`Part ${part} of ${filename}: \n\n ${text}\n\n---\nPlease respond with 'file received' or 'error' if there's an issue.`;textarea.dispatchEvent(enterKeyEvent); } async function readChunk(blobSlice){return new Promise((resolve,reject)=>{const reader=new FileReader();reader.onload=(event)=>{const chunk=event.target.result;resolve(chunk);};reader.onerror=()=>{reject("Error reading chunk");};reader.readAsText(blobSlice);});}})();
